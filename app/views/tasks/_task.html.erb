<%= turbo_stream_from(task) %>

<div class="card" id="<%= dom_id(task) %>">
  <div class="card-body">
    <div class="card-header">
      <%= task.title %>
    </div>
    <div class="card-body">
      <div class="card-text">

        <%= button_to(t('sprints.start'), project_task_sprints_path(task.project_id, task),
        method: :post, class: 'btn btn-primary align-middle') %>

        <ul class="mt-3 list-group" id="sprints">

          <% task.sprints.order(start: :desc).each do |sprint| %>
            <% if sprint.end.nil? %>
              <%= render('sprints/new_sprint', sprint: sprint, user: @user, task: task) %>
            <% else %>
              <%= render('sprints/sprint', sprint: sprint, user: @user) %>
            <% end %>
          <% end %>
          
        </ul>

        <%= button_to(t('tasks.remove_btn'), project_task_path(task.project_id, task),
        method: :delete, class: 'btn btn-secondary align-middle float-end mt-3',
        data: { turbo_method: :delete, turbo_confirm: t('tasks.remove_btn_confirm') }) %>
      </div>
    </div>
  </div>
</div>
